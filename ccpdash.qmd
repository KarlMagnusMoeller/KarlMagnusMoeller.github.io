---
title: "Comparative climate politics dashboard"
format: 
  html:
    fig-width: 10
    fig-height: 13
execute:
  echo: false
  warning: false
  error: false
---

This page provides an overview of how countries compare to each other across time with regards to their measurable climate policy performance. Some countries are consistent top scorers, others have improved over time, and there is significant and telling variation across different indicators of climate policy stringency, ambition, effort, or whatever we want to call it.

## Carbon pricing scores

The OECD has provided a fantastic public service to those interested in comparative climate policy by calculating not only explicit carbon prices but the total taxation of energy-related CO~2~ emissions that results from various energy-related policy instruments including explicit carbon prices, emissions trading schemes and fuel excise taxes. Specifically, the CPS measures the share of emissions prices at at least a given price level (30, 60, or 120 USD). The downside of this data is that it covers just 44 countries for three years; 2012, 2015, and 2018. This illustrates how demanding the creation of more encompassing climate policy indicators really is. Switch between tabs to get a disaggregated view of Carbon Pricing Scores at a sectoral level. 

::: panel-tabset

```{r cps}

pacman::p_load(tidyverse, gghighlight)

cps <- read.csv(here::here("data","OECD_effective_carbon_rates_2012_2018.csv")) %>% 
  rename(ccode = 1) %>% 
  filter(ccode != "ALL" & INDICATOR == "CPS")

vars <- cps %>% distinct(Sector,Price,Coverage) %>% rename(s=1,p=2,c=3)

vars_core <- vars %>% slice_head(n=14) %>% slice_tail(n=7)

gghighlight_facet <- function(s, p, c) {
  data <- cps %>%
    subset(Sector == s & Price == p & Coverage == c) %>%
    group_by(Year) %>% mutate(Rank = dense_rank(desc(Value)))
  
  data %>%
    ggplot(aes(Year, Value)) +
    geom_line(aes(group = ccode), size = 1) +
    gghighlight(
      unhighlighted_params = list(linewidth = 0.5, alpha = 0.5),
      use_direct_label = FALSE
    ) +
    geom_point(aes(color = Rank), size = 3) +
    theme_bw() +
    facet_wrap( ~ ccode) +
    labs(
      title = "Carbon Pricing Scores among 44 countries, 2012-2018",
      subtitle = glue::glue("Sector: {s}, Price level: {p}, Coverage: {c}")
    ) +
    scale_color_viridis_c(direction = -1) +
    theme(
      panel.grid.major = element_blank(),
      panel.grid.minor = element_blank(),
      axis.text.x = element_text(
        angle = 90,
        vjust = 0.5,
        hjust = 1
      )
    ) + scale_x_continuous(breaks = c(2012, 2015, 2018))
  
}

#gghighlight_facet("All sectors",  "EUR 60 per tonne of CO2", "Including emissions from the combustion of biomass")

cps_plots <- pmap(vars_core, gghighlight_facet)


```

#### All sectors

```{r all}

cps_plots[[1]]

```


#### Road
```{r road}

cps_plots[[2]]

```


#### Off-road
```{r offroad}

cps_plots[[3]]

```


#### Industry
```{r industry}

cps_plots[[4]]

```

#### Agriculture
```{r agriculture}

cps_plots[[5]]

```

#### Buildings
```{r buildings}

cps_plots[[6]]

```

#### Electricity
```{r electricity}

cps_plots[[7]]

```

:::

## Fossil fuel subsidies per capita

Coming soon

## Emissions-weighted carbon prices

Coming soon

## Number of climate change laws

Coming soon
